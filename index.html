<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <link rel="preconnect" href="https://www.youtube.com">
    <link rel="preconnect" href="https://www.google.com">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‚˜ë§Œì˜ ìœ íŠœë¸Œ ì±…ì¥ (by. Joel Lee)</title>
    <style>
        /* ğŸ¨ í…Œë§ˆ ë° ë³€ìˆ˜ ì„¤ì • */
        :root {
            --primary: #e50914;
            --bg: #141414;
            --sidebar-bg: #111;
            --card-bg: #1a1a1a;
            --text: #ffffff;
            --border: #333;
            --success: #2ecc71;
            --yt-grey: #2a2a2a;
            --notebook-bg: #4b5563;
            --input-bg: #222;
        }

        body.light-mode {
            --bg: #f9f9f9;
            --sidebar-bg: #ffffff;
            --card-bg: #ffffff;
            --text: #141414;
            --border: #dddddd;
            --yt-grey: #eeeeee;
            --input-bg: #ffffff;
        }

        body {
            font-family: 'Pretendard', -apple-system, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            display: flex;
            height: 100vh;
            overflow: hidden;
            transition: 0.3s;
        }

        /* ğŸ“ ì‚¬ì´ë“œë°” ìŠ¤íƒ€ì¼ */
        .sidebar {
            width: 320px;
            min-width: 320px;
            background: var(--sidebar-bg);
            border-right: 1px solid var(--border);
            padding: 25px;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            box-sizing: border-box;
        }

        .logo {
            font-size: 24px;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 5px;
            letter-spacing: -1px;
        }

        .id-guide {
            font-size: 12px;
            color: #888;
            cursor: help;
            margin-bottom: 25px;
            position: relative;
        }
        .id-guide:hover::after {
            content: "ì›í•˜ëŠ” ì±„ë„ ë©”ì¸ > ì±„ë„ ì„¤ëª… ë”ë³´ê¸° > ì±„ë„ ê³µìœ  > ì±„ë„ ID ë³µì‚¬";
            position: absolute; left: 0; top: 20px;
            background: #333; color: #fff; padding: 8px 12px;
            border-radius: 6px; white-space: nowrap; z-index: 100;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }

        .input-group { width: 100%; margin-bottom: 25px; box-sizing: border-box; }
        
        input[type="text"] {
            width: 100%; padding: 12px;
            background: var(--input-bg); border: 1px solid var(--border);
            color: var(--text); border-radius: 8px; margin-bottom: 10px;
            box-sizing: border-box; font-size: 14px;
        }

        .btn {
            width: 100%; padding: 12px;
            background: var(--primary); border: none;
            color: white; font-weight: bold; border-radius: 8px;
            cursor: pointer; font-size: 14px; transition: 0.2s;
            display: block; text-align: center; text-decoration: none; box-sizing: border-box;
        }
        .btn:hover { opacity: 0.9; transform: scale(0.98); }
        .btn-yt-find { background: var(--yt-grey); margin-top: 10px; border: 1px solid var(--border); color: var(--text); }

        .channel-list { flex: 1; margin-top: 10px; }
        .channel-item {
            padding: 15px; background: var(--input-bg);
            border-radius: 10px; margin-bottom: 10px; cursor: pointer;
            border: 1px solid var(--border); display: flex;
            justify-content: space-between; align-items: center;
        }

        .copyright {
            font-size: 11px; color: #777; padding-top: 20px;
            border-top: 1px solid var(--border);
        }

        /* ğŸ¬ ë©”ì¸ ì½˜í…ì¸  & íƒ­ */
        .main-content { flex: 1; padding: 40px; overflow-y: auto; position: relative; }
        
        .theme-toggle {
            position: absolute; top: 30px; right: 40px;
            background: var(--yt-grey); border: 1px solid var(--border);
            color: var(--text); padding: 8px 15px; border-radius: 20px;
            cursor: pointer; font-size: 12px; font-weight: bold; z-index: 100;
        }

        .tab-menu { display: flex; gap: 20px; margin: 25px 0 35px 0; border-bottom: 1px solid var(--border); padding-bottom: 10px; }
        .tab-item { cursor: pointer; font-weight: bold; color: #777; transition: 0.3s; padding-bottom: 5px; border-bottom: 2px solid transparent; font-size: 15px; }
        .tab-item.active { color: var(--primary); border-color: var(--primary); }

        .video-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 25px; }
        .video-card { background: var(--card-bg); border-radius: 12px; overflow: hidden; cursor: pointer; transition: 0.3s; border: 1px solid var(--border); position: relative; }
        .video-card:hover { transform: translateY(-8px); box-shadow: 0 10px 20px rgba(0,0,0,0.2); }
        .video-card img { width: 100%; display: block; }
        .video-info { padding: 15px; font-size: 14px; line-height: 1.5; font-weight: 500; }
        .shorts-badge { position: absolute; top: 10px; right: 10px; background: rgba(229, 9, 20, 0.9); color: white; padding: 3px 7px; border-radius: 4px; font-size: 11px; font-weight: bold; }

        /* ğŸ§  í†µí•© ë¶„ì„ ì„¼í„° */
        .analysis-center { display: none; margin-top: 40px; animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .unified-box {
            background: var(--card-bg);
            border-radius: 15px;
            border: 1px solid var(--border);
            padding: 30px;
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .unified-title {
            font-size: 20px;
            font-weight: bold;
            border-bottom: 1px solid var(--border);
            padding-bottom: 15px;
            margin-bottom: 5px;
        }

        .step-item {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .step-label {
            font-size: 15px;
            font-weight: bold;
            color: #ddd;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-link {
            display: inline-block;
            background: var(--notebook-bg);
            color: white;
            padding: 10px 20px;
            border-radius: 6px;
            text-decoration: none;
            font-weight: bold;
            font-size: 14px;
            width: fit-content;
        }

        .url-copy-wrapper {
            display: flex;
            align-items: center;
            gap: 10px;
            background: var(--bg);
            padding: 12px;
            border-radius: 8px;
            border: 1px solid var(--border);
        }

        .video-url-text {
            font-size: 13px;
            color: #aaa;
            flex: 1;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* í”„ë¡¬í”„íŠ¸ ì„ íƒ íƒ­ */
        .prompt-tabs {
            display: flex;
            gap: 10px;
            margin-top: 5px;
        }

        .prompt-tab-btn {
            padding: 8px 16px;
            background: var(--yt-grey);
            border: 1px solid var(--border);
            color: #ccc;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: bold;
        }

        .prompt-tab-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .prompt-display-area {
            background: var(--bg);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid var(--border);
            position: relative;
        }

        .prompt-text-pre {
            font-size: 14px;
            color: #ddd;
            white-space: pre-wrap;
            line-height: 1.7;
            margin: 0;
        }

        .copy-feedback { display: none; color: var(--success); font-size: 12px; font-weight: bold; margin-right: 10px; }
        
        /* ì‹¤ì „ íŒ ì„¹ì…˜ */
        .tips-section {
            margin-top: 10px;
            padding-top: 20px;
            border-top: 1px solid var(--border);
        }

        .tips-title {
            font-size: 14px;
            font-weight: bold;
            color: #888;
            margin-bottom: 15px;
        }

        .tips-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .tip-item {
            font-size: 12px;
            color: #777;
            line-height: 1.6;
        }

        .tip-label {
            font-weight: bold;
            color: #aaa;
            margin-bottom: 5px;
            display: block;
        }

        .btn-small { padding: 6px 12px; font-size: 12px; background: #444; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>

    <aside class="sidebar">
        <div class="logo">ë‚˜ë§Œì˜ ìœ íŠœë¸Œ ì±…ì¥</div>
        <div class="id-guide">ğŸ’¡ ì±„ë„ ID í™•ì¸ë²• (ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ì„¸ìš”)</div>
        
        <div class="input-group">
            <input type="text" id="chName" placeholder="ì±„ë„ ì´ë¦„ (ì˜ˆ: ì¹¨ì°©ë§¨)">
            <input type="text" id="chId" placeholder="ì±„ë„ ID (UC... / í™•ì¸ë²• ìœ„ ì°¸ì¡°)">
            <button class="btn" onclick="addChannel()">ì±„ë„ ë¦¬ìŠ¤íŠ¸ ì¶”ê°€</button>
            <a href="https://www.youtube.com" target="_blank" class="btn btn-yt-find">Youtubeì—ì„œ ì°¾ì•„ë³´ê¸°</a>
        </div>

        <div class="channel-list" id="channelList"></div>

        <div class="copyright">
            Â©2026. ì´ìŠ¹ë§Œ (Joel Lee) All rights reserved.
        </div>
    </aside>

    <main class="main-content">
        <button class="theme-toggle" onclick="toggleTheme()">â˜€ï¸ ëª¨ë“œ ì „í™˜</button>
        <h1 id="mainTitle" style="font-size: 28px;">í™˜ì˜í•©ë‹ˆë‹¤! ì±…ì¥ì—ì„œ ì±„ë„ì„ ê³¨ë¼ì£¼ì„¸ìš”.</h1>

        <div class="tab-menu" id="tabMenu" style="display:none;">
            <div class="tab-item active" onclick="filterVideos('ALL')">ì „ì²´ ì˜ìƒ</div>
            <div class="tab-item" onclick="filterVideos('VIDEO')">ì¼ë°˜ ë™ì˜ìƒ</div>
            <div class="tab-item" onclick="filterVideos('SHORTS')">Shorts</div>
        </div>

        <div class="video-grid" id="videoGrid"></div>
        <div style="text-align: center; margin-top: 30px;">
            <button id="loadMoreBtn" class="btn btn-yt-find" style="display:none; width:auto; padding: 12px 50px; border-radius: 30px;" onclick="loadMoreVideos()">ì´ì „ ì˜ìƒ ë” ë¶ˆëŸ¬ì˜¤ê¸° â†“</button>
        </div>

        <div class="analysis-center" id="analysisCenter">
            <iframe id="mainPlayer" width="100%" height="550" frameborder="0" allowfullscreen style="border-radius: 15px; margin-bottom: 25px; border: 1px solid var(--border);"></iframe>
            
            <div class="unified-box">
                <div class="unified-title">ìœ„ ì˜ìƒì„ ë¶„ì„í•˜ë ¤ë©´?</div>

                <div class="step-item">
                    <div class="step-label">1. NotebookLM ì ‘ì†í•˜ê¸°</div>
                    <a href="https://notebooklm.google.com" target="_blank" class="btn-link">NotebookLM ì ‘ì†í•˜ê¸°</a>
                </div>

                <div class="step-item">
                    <div class="step-label">2. ë¡œê·¸ì¸ â†’ 'ìƒˆë¡œ ë§Œë“¤ê¸°' â†’ 'ì›¹ì‚¬ì´íŠ¸' ë²„íŠ¼ í´ë¦­ í›„ ìœ íŠœë¸Œ ë§í¬ ë¶™ì—¬ë„£ê¸°</div>
                    <div class="url-copy-wrapper">
                        <span id="currentVideoUrl" class="video-url-text">ì˜ìƒì„ ì„ íƒí•˜ë©´ ë§í¬ê°€ í‘œì‹œë©ë‹ˆë‹¤.</span>
                        <span id="linkFeedback" class="copy-feedback">âœ” ë³µì‚¬ ì™„ë£Œ</span>
                        <button class="btn-small" onclick="copyLink()">ë§í¬ ë³µì‚¬</button>
                    </div>
                </div>

                <div class="step-item">
                    <div class="step-label">3. ì•„ë˜ í”„ë¡¬í”„íŠ¸ ì¤‘ ê³ ë¥´ê±°ë‚˜, ë³¸ì¸ë§Œì˜ í”„ë¡¬í”„íŠ¸ë¡œ ë¶„ì„ ìš”ì²­</div>
                    <div class="prompt-tabs">
                        <button class="prompt-tab-btn active" onclick="selectPrompt('summary', this)">[ë‚´ìš© ìš”ì•½]</button>
                        <button class="prompt-tab-btn" onclick="selectPrompt('insight', this)">[ì¸ì‚¬ì´íŠ¸]</button>
                        <button class="prompt-tab-btn" onclick="selectPrompt('creative', this)">[2ì°¨ ì°½ì‘]</button>
                    </div>
                    <div class="prompt-display-area">
                        <div style="position: absolute; top: 15px; right: 15px; display: flex; align-items: center;">
                            <span id="promptFeedback" class="copy-feedback">âœ” ë³µì‚¬ ì™„ë£Œ</span>
                            <button class="btn-small" onclick="copyPrompt()">í”„ë¡¬í”„íŠ¸ ë³µì‚¬</button>
                        </div>
                        <pre id="promptText" class="prompt-text-pre"></pre>
                    </div>
                </div>

                <div class="tips-section">
                    <div class="tips-title">AI í”„ë¡¬í”„íŠ¸ ì‹¤ì „ íŒ</div>
                    <div class="tips-grid">
                        <div class="tip-item">
                            <span class="tip-label">1. ì—­í•  ë¶€ì—¬ (#ì—­í• )</span>
                            AIì—ê²Œ êµ¬ì²´ì ì¸ 'ê°€ë©´'ì„ ì”Œì›Œì£¼ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤. ì „ë¬¸ì ì¸ í†¤ì•¤ë§¤ë„ˆë¥¼ ê²°ì •í•©ë‹ˆë‹¤.<br>
                            - ì˜ˆì‹œ 1 (ë¶„ì„í˜•): "ë„ˆëŠ” 10ë§Œ êµ¬ë…ìë¥¼ ë³´ìœ í•œ IT ì „ë¬¸ ë¦¬ë·°ì–´ì•¼."<br>
                            - ì˜ˆì‹œ 2 (êµìœ¡í˜•): "ë„ˆëŠ” ì–´ë ¤ìš´ ê°œë…ì„ ì´ˆë“±í•™ìƒë„ ì´í•´í•˜ê¸° ì‰½ê²Œ ì„¤ëª…í•˜ëŠ” ì¼íƒ€ ê°•ì‚¬ì•¼."
                        </div>
                        <div class="tip-item">
                            <span class="tip-label">2. ëª©í‘œ ëª…í™•í™” (#ëª©í‘œ)</span>
                            AIê°€ 'ë¬´ì—‡'ì„ 'ì–´ë–»ê²Œ' ê²°ê³¼ë¬¼ë¡œ ë‚´ë†“ì•„ì•¼ í• ì§€ ì´ì •í‘œë¥¼ ì„¸ì›Œì£¼ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤.<br>
                            - ì˜ˆì‹œ 1 (êµ¬ì¡° ì§€ì •): "ì´ ì˜ìƒì˜ ë‚´ìš©ì„ ì„œë¡ -ë³¸ë¡ -ê²°ë¡ ì˜ 3ë‹¨ êµ¬ì„±ìœ¼ë¡œ ìš”ì•½í•´ì¤˜."<br>
                            - ì˜ˆì‹œ 2 (ì‹¤í–‰ ìœ„ì£¼): "ë‚´ê°€ ë°”ë¡œ ì‹¤ì²œí•  ìˆ˜ ìˆë„ë¡ ì²´í¬ë¦¬ìŠ¤íŠ¸ í˜•íƒœë¡œ 5ê°€ì§€ë¥¼ ë½‘ì•„ì¤˜."
                        </div>
                        <div class="tip-item">
                            <span class="tip-label">3. ì œì•½ ì‚¬í•­ ì„¤ì • (#í•˜ì§€ ë§ ê²ƒ)</span>
                            AIì˜ í”í•œ ì‹¤ìˆ˜ì¸ 'í™˜ê°(Hallucination)'ì„ ë°©ì§€í•˜ê³  êµ°ë”ë”ê¸°ë¥¼ ëºë‹ˆë‹¤.<br>
                            - ì˜ˆì‹œ 1 (ê°ê´€ì„± ìœ ì§€): "ì˜ìƒì— ì–¸ê¸‰ë˜ì§€ ì•Šì€ ì‚¬ì‹¤ì„ ê·¼ê±° ì—†ì´ ì¶”ì¸¡í•´ì„œ ì ì§€ ë§ˆ."<br>
                            - ì˜ˆì‹œ 2 (ê°€ë…ì„± ìœ ì§€): "ë„ˆë¬´ ì „ë¬¸ì ì¸ ìš©ì–´ëŠ” í”¼í•˜ê³ , ì¤‘í•™ìƒì´ ì´í•´í•  ìˆ˜ ìˆëŠ” ì‰¬ìš´ ë‹¨ì–´ë§Œ ì‚¬ìš©í•´."
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

<script>
    const YOUTUBE_API_KEY = 'AIzaSyBSJOPgrN_Hj4wK_5Ro0q0ObR-vxjHvwr8'; 

    let channels = JSON.parse(localStorage.getItem('vibe_yt_shelf_v1')) || [];
    let currentChannelId = "";
    let nextPageToken = "";
    let allLoadedVideos = [];
    let currentFilter = 'ALL';
    let currentVideo = null;

    // í”„ë¡¬í”„íŠ¸ ë°ì´í„°ì…‹
    const promptLibrary = {
        summary: `ì œê³µëœ ìœ íŠœë¸Œ ì˜ìƒ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë‚´ìš©ì„ ìš”ì•½í•´ì¤˜.
1. í•œ ì¤„ ìš”ì•½: ì´ ì˜ìƒì´ ì „ì²´ì ìœ¼ë¡œ ë¬´ì—‡ì„ ë§í•˜ëŠ”ì§€ í•œ ë¬¸ì¥ìœ¼ë¡œ ì •ì˜í•´ì¤˜.
2. í•µì‹¬ í‚¤ì›Œë“œ: ì˜ìƒì˜ ì£¼ì œë¥¼ ê´€í†µí•˜ëŠ” í‚¤ì›Œë“œ 3~5ê°œë¥¼ ë½‘ì•„ì¤˜.
3. íƒ€ì„ë¼ì¸ë³„ ìš”ì§€: ì˜ìƒì˜ íë¦„ì— ë”°ë¼ ì£¼ìš” ì„¹ì…˜ë³„ í•µì‹¬ ë‚´ìš©ì„ ë¶ˆë ›í¬ì¸íŠ¸ë¡œ ì •ë¦¬í•´ì¤˜.
4. ê²°ë¡ : ìœ íŠœë²„ê°€ ë§ˆì§€ë§‰ìœ¼ë¡œ ê°•ì¡°í•˜ëŠ” ë©”ì‹œì§€ëŠ” ë­ì•¼?`,
        
        insight: `ì´ ì˜ìƒì˜ ë‚´ìš©ì„ ë¶„ì„í•´ì„œ ë‹¨ìˆœ ìš”ì•½ ì´ìƒì˜ ê¹Šì´ ìˆëŠ” í†µì°°ì„ ë½‘ì•„ì¤˜.

1. í•µì‹¬ ìš”ì•½: ì˜ìƒì˜ í•µì‹¬ ë…¼ë¦¬ë¥¼ ê°„ëµíˆ ì •ë¦¬í•´ì¤˜.
2. ìˆ¨ê²¨ì§„ ì˜ë„/ë§¥ë½: ì´ ì •ë³´ê°€ ì™œ ì§€ê¸ˆ ì¤‘ìš”í•œì§€, ìœ íŠœë²„ê°€ ì „ë‹¬í•˜ë ¤ëŠ” ë³¸ì§ˆì ì¸ ê°€ì¹˜ëŠ” ë¬´ì—‡ì¸ì§€ ë¶„ì„í•´ì¤˜.
3. ì‹¤í–‰ ê°€ëŠ¥í•œ ì¸ì‚¬ì´íŠ¸(Action Item): ì´ ë‚´ìš©ì„ ì ‘í•œ ì‹œì²­ìê°€ ë‹¹ì¥ ì‹¤ìƒí™œì´ë‚˜ ì—…ë¬´ì— ì ìš©í•´ë³¼ ìˆ˜ ìˆëŠ” êµ¬ì²´ì ì¸ ë°©ë²• 3ê°€ì§€ë¥¼ ì œì•ˆí•´ì¤˜.
4. ë¹„íŒì  ì‹œê°: ì˜ìƒì˜ ì£¼ì¥ ì¤‘ ë…¼ë¦¬ì  ë¹„ì•½ì´ ìˆê±°ë‚˜, ì¶”ê°€ë¡œ ê²€ì¦ì´ í•„ìš”í•œ ë¶€ë¶„ì´ ìˆë‹¤ë©´ ë¬´ì—‡ì¼ê¹Œ?`,
        
        creative: `ì œê³µëœ ì˜ìƒì˜ **ë©”ì‹œì§€(ë³¸ì§ˆ)**ëŠ” ìœ ì§€í•˜ë˜, ì „í˜€ ë‹¤ë¥¸ í˜•íƒœì˜ ì½˜í…ì¸ ë¡œ ì¬êµ¬ì„±í•´ì¤˜.
1. ìƒˆë¡œìš´ êµ¬ì¡°: ê¸°ì¡´ì˜ ì „ê°œ ë°©ì‹ì„ ë²„ë¦¬ê³ , (ì˜ˆ: Q&A ë°©ì‹ / ìŠ¤í† ë¦¬í…”ë§ ë°©ì‹ / 5ë‹¨ê³„ ê°€ì´ë“œ ë°©ì‹)ìœ¼ë¡œ êµ¬ì¡°ë¥¼ ë³€ê²½í•´ì¤˜.
2. ì˜ˆì‹œ ë³€í˜•: ì˜ìƒì—ì„œ ë‚˜ì˜¨ ì˜ˆì‹œ ëŒ€ì‹ , (ì˜ˆ: 20ëŒ€ ëŒ€í•™ìƒ / í•œêµ­ì˜ IT ì§ì¥ì¸ / ìì˜ì—…ì)ê°€ ê³µê°í•  ìˆ˜ ìˆëŠ” ìƒˆë¡œìš´ ì‚¬ë¡€ë¥¼ ë“¤ì–´ ì„¤ëª…í•´ì¤˜.
3. í•µì‹¬ ë©”ì‹œì§€ ê°•ì¡°: ì›ì‘ì˜ ì£¼ì œë¥¼ ê´€í†µí•˜ë˜, ë¬¸ì²´ëŠ” (ì˜ˆ: ë‹¨í˜¸í•œ ë§íˆ¬ / ë‹¤ì •í•œ ì¡°ì–¸ì²´)ë¡œ ë°”ê¿”ì„œ ì‘ì„±í•´ì¤˜.
4. ì œëª© ì œì•ˆ: í´ë¦­ì„ ìœ ë„í•  ìˆ˜ ìˆëŠ” ë§¤ë ¥ì ì¸ ì œëª© 3ê°€ì§€ë¥¼ ë½‘ì•„ì¤˜.`
    };

    window.onload = () => {
        renderChannels();
        selectPrompt('summary', document.querySelector('.prompt-tab-btn')); // ê¸°ë³¸ í”„ë¡¬í”„íŠ¸ ì„¤ì •
    };

    function toggleTheme() {
        document.body.classList.toggle('light-mode');
        document.querySelector('.theme-toggle').textContent = document.body.classList.contains('light-mode') ? "ğŸŒ™ ë‹¤í¬ ëª¨ë“œ" : "â˜€ï¸ ë¼ì´íŠ¸ ëª¨ë“œ";
    }

    function addChannel() {
        const name = document.getElementById('chName').value.trim();
        const id = document.getElementById('chId').value.trim();
        if(!name || !id) return alert("ì±„ë„ ì •ë³´ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.");
        channels.push({name, id});
        localStorage.setItem('vibe_yt_shelf_v1', JSON.stringify(channels));
        renderChannels();
    }

    function renderChannels() {
        const list = document.getElementById('channelList');
        list.innerHTML = channels.map((c, i) => `
            <div class="channel-item" onclick="initLoad('${c.id}', '${c.name}')">
                <b style="font-size:14px;">${c.name}</b><span style="color:#888; font-size:18px;" onclick="event.stopPropagation(); removeChannel(${i})">Ã—</span>
            </div>`).join('');
    }

    function removeChannel(i) { if(confirm("ì‚­ì œí• ê¹Œìš”?")) { channels.splice(i,1); localStorage.setItem('vibe_yt_shelf_v1', JSON.stringify(channels)); renderChannels(); } }

    async function initLoad(id, name) {
        currentChannelId = id; nextPageToken = ""; allLoadedVideos = [];
        document.getElementById('mainTitle').textContent = `ğŸ“š ${name} ì½”ë„ˆ`;
        document.getElementById('videoGrid').innerHTML = "";
        document.getElementById('tabMenu').style.display = 'flex';
        document.getElementById('analysisCenter').style.display = 'none';
        await loadMoreVideos();
    }

    async function loadMoreVideos() {
        const playlistId = currentChannelId.replace('UC', 'UU');
        let url = `https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&maxResults=15&playlistId=${playlistId}&key=${YOUTUBE_API_KEY}`;
        if (nextPageToken) url += `&pageToken=${nextPageToken}`;

        try {
            const response = await fetch(url);
            const data = await response.json();
            nextPageToken = data.nextPageToken || "";
            const videoIds = data.items.map(item => item.snippet.resourceId.videoId).join(',');
            const detailRes = await fetch(`https://www.googleapis.com/youtube/v3/videos?part=contentDetails,snippet&id=${videoIds}&key=${YOUTUBE_API_KEY}`);
            const detailData = await detailRes.json();

            const newVideos = data.items.map(item => {
                const details = detailData.items.find(d => d.id === item.snippet.resourceId.videoId);
                const durationStr = details ? details.contentDetails.duration : "";
                const title = item.snippet.title;
                const description = item.snippet.description || "";
                const thumbnails = item.snippet.thumbnails;
                const durationSeconds = parseISO8601Duration(durationStr);
                const isShorts = (durationSeconds <= 180 && (title.toLowerCase().includes('shorts') || description.toLowerCase().includes('#shorts'))) || (durationSeconds <= 60 && !thumbnails.maxres);

                return {
                    id: item.snippet.resourceId.videoId,
                    title: title,
                    thumb: thumbnails.medium ? thumbnails.medium.url : thumbnails.default.url,
                    type: isShorts ? 'SHORTS' : 'VIDEO'
                };
            });

            allLoadedVideos = [...allLoadedVideos, ...newVideos];
            filterVideos(currentFilter);
            document.getElementById('loadMoreBtn').style.display = nextPageToken ? 'inline-block' : 'none';
        } catch(e) { console.error("ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨!"); }
    }

    function parseISO8601Duration(duration) {
        const match = duration.match(/PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?/);
        const hours = parseInt(match[1] || 0);
        const minutes = parseInt(match[2] || 0);
        const seconds = parseInt(match[3] || 0);
        return hours * 3600 + minutes * 60 + seconds;
    }

    function filterVideos(type) {
        currentFilter = type;
        const tabs = document.querySelectorAll('.tab-item');
        tabs.forEach(tab => {
            tab.classList.remove('active');
            if(tab.textContent.includes(type === 'ALL' ? 'ì „ì²´' : type === 'VIDEO' ? 'ì¼ë°˜' : 'Shorts')) tab.classList.add('active');
        });
        const filtered = allLoadedVideos.filter(v => type === 'ALL' || v.type === type);
        const grid = document.getElementById('videoGrid');
        grid.innerHTML = filtered.map(v => `
            <div class="video-card" onclick="playVideo('${v.id}', '${v.title.replace(/'/g, "")}')">
                <img src="${v.thumb}">
                ${v.type === 'SHORTS' ? '<div class="shorts-badge">SHORTS</div>' : ''}
                <div class="video-info">${v.title}</div>
            </div>`).join('');
    }

    function playVideo(id, title) {
        currentVideo = { id, title, url: `https://www.youtube.com/watch?v=${id}` };
        document.getElementById('mainPlayer').src = `https://www.youtube.com/embed/${id}?autoplay=1`;
        document.getElementById('currentVideoUrl').textContent = currentVideo.url;
        document.getElementById('analysisCenter').style.display = 'block';
        document.getElementById('analysisCenter').scrollIntoView({ behavior: 'smooth' });
    }

    // í”„ë¡¬í”„íŠ¸ ì„ íƒ í•¸ë“¤ëŸ¬
    function selectPrompt(key, btn) {
        document.querySelectorAll('.prompt-tab-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        document.getElementById('promptText').textContent = promptLibrary[key];
    }

    function copyPrompt() {
        navigator.clipboard.writeText(document.getElementById('promptText').textContent).then(() => showFb('promptFeedback'));
    }

    function copyLink() {
        if(currentVideo) {
            navigator.clipboard.writeText(currentVideo.url).then(() => showFb('linkFeedback'));
        }
    }

    function showFb(id) {
        const fb = document.getElementById(id);
        fb.style.display = 'inline';
        setTimeout(() => { fb.style.display = 'none'; }, 2000);
    }
</script>
</body>
</html>